{"version":3,"sources":["../source/app.js"],"names":["app","Koa","use","context","body","user","User","loginWithAuthData","access_token","expires_in","uid","id","scope","save","username","login","email","github","get","update","search","SearchQuery","queryString","query","keywords","find"],"mappings":";;;;;;;;;AAAA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEO,MAAMA,GAAG,GAAG,IAAIC,YAAJ,EAAZ;;AAEPD,GAAG,CAACE,GAAJ,CACI,mBACI,eADJ,EAEI,mBAAM,OAAOC,OAAP,EAAgBC,IAAhB,KAAyB;AAC3B,QAAMC,IAAI,GAAG,MAAMC,iBAAKC,iBAAL,CACf;AACIC,IAAAA,YAAY,EAAEJ,IAAI,CAACI,YADvB;AAEIC,IAAAA,UAAU,EAAE,IAFhB;AAGIC,IAAAA,GAAG,EAAEN,IAAI,CAACC,IAAL,CAAUM,EAAV,GAAe,EAHxB;AAIIC,IAAAA,KAAK,EAAER,IAAI,CAACQ,KAAL,GAAa;AAJxB,GADe,EAOf,QAPe,CAAnB;AAUA,QAAMP,IAAI,CAACQ,IAAL,CACF;AACIC,IAAAA,QAAQ,EAAEV,IAAI,CAACC,IAAL,CAAUU,KADxB;AAEIC,IAAAA,KAAK,EAAEZ,IAAI,CAACC,IAAL,CAAUW,KAFrB;AAGIC,IAAAA,MAAM,EAAEb,IAAI,CAACC;AAHjB,GADE,EAMF;AAAEA,IAAAA;AAAF,GANE,CAAN;AASAF,EAAAA,OAAO,CAACC,IAAR,GAAeC,IAAI,CAACa,GAAL,CAAS,QAAT,CAAf;AACH,CArBD,CAFJ,CADJ,EA2BKhB,GA3BL,CA2BS,oBAAK,kBAAL,EAAyBiB,gBAAzB,CA3BT,EA4BKjB,GA5BL,CA6BQ,mBAAI,WAAJ,EAAiB,MAAMC,OAAN,IAAiB;AAC9B,QAAMiB,MAAM,GAAG,IAAIC,uBAAJ,CAAgB,UAAhB,CAAf;AAEAlB,EAAAA,OAAO,CAACC,IAAR,GAAe,MAAMgB,MAAM,CACtBE,WADgB,CACJnB,OAAO,CAACoB,KAAR,CAAcC,QADV,EAEhBC,IAFgB,EAArB;AAGH,CAND,CA7BR,EAqCKvB,GArCL,CAqCSC,OAAO,IAAKA,OAAO,CAACC,IAAR,GAAe,iBArCpC","sourcesContent":["import 'core-js/es/object';\n\nimport Koa from 'koa';\n\nimport { get, post } from 'koa-route';\n\nimport { User, SearchQuery } from 'leanengine';\n\nimport { OAuth } from './GitHub';\n\nimport { update } from './activity';\n\nexport const app = new Koa();\n\napp.use(\n    get(\n        '/GitHub/OAuth',\n        OAuth(async (context, body) => {\n            const user = await User.loginWithAuthData(\n                {\n                    access_token: body.access_token,\n                    expires_in: 7200,\n                    uid: body.user.id + '',\n                    scope: body.scope + ''\n                },\n                'github'\n            );\n\n            await user.save(\n                {\n                    username: body.user.login,\n                    email: body.user.email,\n                    github: body.user\n                },\n                { user }\n            );\n\n            context.body = user.get('github');\n        })\n    )\n)\n    .use(post('/activity/update', update))\n    .use(\n        get('/activity', async context => {\n            const search = new SearchQuery('Activity');\n\n            context.body = await search\n                .queryString(context.query.keywords)\n                .find();\n        })\n    )\n    .use(context => (context.body = 'Hello, FCC-CDC!'));\n"],"file":"app.js"}